(this["webpackJsonpredux-frontendcatalog"]=this["webpackJsonpredux-frontendcatalog"]||[]).push([[0],{31:function(e,t,a){e.exports=a(44)},41:function(e,t,a){},42:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),c=a.n(r),l=a(10),u=a(13),s=a(30),i=a(1),h=a(3),p=a.n(h),b=a(5),m=function(){return{type:"GET BOOKS"}};function d(){return function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET BOOKS"}),e.prev=1,e.next=4,fetch("http://localhost:3000/book");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n),t({type:"GET_BOOKS_SUCCESS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"GET_BOOKS_FAILURE"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()}var E={loading:!1,hasErrors:!1,books:[]};var g={loading:!1,hasErrors:!1,authors:[]};function f(){return function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET CATEGORIES"}),e.prev=1,e.next=4,fetch("http://localhost:3000/category");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n),t({type:"GET_CATEGORIES_SUCCESS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"GET_CATEGORIES_FAILURE"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()}var O={loading:!1,hasErrors:!1,categories:[]};var v=function(e){return{type:"GET_BOOK_SUCCESS",payload:e}};var k={loading:!1,hasErrors:!1,books:[]};var y=Object(u.c)({books:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET BOOKS":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"GET_BOOKS_SUCCESS":return{books:t.payload,loading:!1,hasErrors:!1};case"GET_BOOKS_FAILURE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},book:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(console.log("payload"),console.log(t.payload),t.type){case"GET BOOK":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"GET_BOOK_SUCCESS":return{book:t.payload,loading:!1,hasErrors:!1};case"GET_BOOK_FAILURE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},authors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET COMMENTS":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"GET_AUTHORS_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{authors:t.payload,loading:!1,hasErrors:!1});case"GET_AUTHORS_FAILURE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET CATEGORIES":return Object(i.a)(Object(i.a)({},e),{},{loading:!0});case"GET_CATEGORIES_SUCCESS":return{categories:t.payload,loading:!1,hasErrors:!1};case"GET_CATEGORIES_FAILURE":return Object(i.a)(Object(i.a)({},e),{},{loading:!1,hasErrors:!0});default:return e}}}),j=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.d,S=Object(u.e)(y,j(Object(u.a)(s.a))),C=(a(41),a(15)),T=a(16),_=a(18),A=a(17),x=(a(42),a(9)),w=a(4),G=a(12),I=function(e){var t=e.book,a=e.excerpt,n=e.onDelete,r=t.author,c=t.categoryName;return o.a.createElement("article",{className:a?"book-excerpt":"book"},o.a.createElement("h2",null,t.title),o.a.createElement("img",{src:t.img,alt:"".concat(t.title," Book Cover")}),c&&o.a.createElement("p",null,c),r&&o.a.createElement(o.a.Fragment,null,o.a.createElement("span",null,r.name),o.a.createElement("p",null,r.bio)),a&&o.a.createElement(x.b,{to:"/book/".concat(t.id),className:"button"},"View Book"),n&&o.a.createElement("button",{onClick:n},"Delete"))},U=a(22);function B(){return function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET AUTHORS"}),e.prev=1,e.next=4,fetch("http://localhost:3000/author");case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n),t({type:"GET_AUTHORS_SUCCESS",payload:n}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"GET_AUTHORS_FAILURE"});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()}var D=function(e){Object(_.a)(a,e);var t=Object(A.a)(a);function a(){var e;Object(C.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).initialState={img:"",title:"",selectionAuthorID:-1,selectionAuthorName:"",addedAuthorID:0,addAuthorName:"",categoryID:-1,categoryName:""},e.state=e.initialState,e.handleSubmit=function(){var t=Object(b.a)(p.a.mark((function t(a){var n,o,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),console.log(e.state),-1!==e.state.selectionAuthorID){t.next=9;break}return t.next=5,fetch("http://localhost:3000/author",{method:"POST",body:JSON.stringify({name:e.state.addAuthorName,bio:""}),headers:{"Content-Type":"application/json"}});case 5:return o=t.sent,t.next=8,o.json();case 8:n=t.sent;case 9:return t.next=11,fetch("http://localhost:3000/book",{method:"POST",body:JSON.stringify({title:e.state.title,img:e.state.img,author_id:void 0!==n?n.id:e.state.selectionAuthorID,category_id:e.state.categoryID}),headers:{"Content-Type":"application/json"}});case 11:r=t.sent,e.setState(e.initialState),e.props.onSubmit(),console.log(r);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){console.log(t.target),e.setState(Object(U.a)({},t.target.title,t.target.value)),console.log(t,"chaangeed")},e.handleAuthorSelect=function(t){e.setState({selectionAuthorID:t.target.value})},e.handleAuthorUpdate=function(t){e.setState({addAuthorName:t.target.value})},e.handleCategorySelection=function(t){e.setState({categoryID:t.target.value})},e}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.dispatch(f()),this.props.dispatch(B())}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("label",null,"Title:",o.a.createElement("input",{type:"text",title:"title",value:this.state.value,onChange:this.handleChange}),"Img:"),o.a.createElement("input",{type:"text",title:"img",value:this.state.value,onChange:this.handleChange}),o.a.createElement("label",null,"Select Author:"),o.a.createElement("select",{value:this.state.selectionAuthorID,onChange:this.handleAuthorSelect},this.props.authors.map((function(e){var t=e.name,a=e.id;return o.a.createElement("option",{value:"".concat(a)},t)})),o.a.createElement("option",{value:-1},"Add New Author")),-1===this.state.selectionAuthorID&&o.a.createElement(o.a.Fragment,null,o.a.createElement("label",null,"Author:"),o.a.createElement("input",{type:"text",title:"author",value:this.state.addAuthorName,onChange:this.handleAuthorUpdate})),o.a.createElement("label",null,"Category:"),o.a.createElement("select",{value:this.state.categoryID,onChange:this.handleCategorySelection},this.props.categories.map((function(e){var t=e.id,a=e.name;return o.a.createElement("option",{value:t},a)}))),o.a.createElement("input",{type:"submit",value:"Submit"})))}}]),a}(o.a.Component),N=Object(l.b)((function(e){return{authors:e.authors.authors,categories:e.categories.categories}}))(D),R=Object(l.b)((function(e){return{loading:e.books.loading,books:e.books.books,hasErrors:e.books.hasErrors,categories:e.categories.categories}}))((function(e){var t=e.dispatch,a=e.loading,r=e.books,c=e.hasErrors,l=Object(n.useState)(!1),u=Object(G.a)(l,2),s=u[0],i=u[1];Object(n.useEffect)((function(){t(d())}),[t]);var h=function(){var e=Object(b.a)(p.a.mark((function e(a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/book/".concat(a),{method:"DELETE"});case 2:e.sent,t(d());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){i(!s),t(d())};return o.a.createElement(o.a.Fragment,null,s?o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{onSubmit:function(){m()}}),o.a.createElement("button",{onClick:m},"Cancel")):o.a.createElement(o.a.Fragment,null,o.a.createElement("button",{onClick:m},"Add Book"),o.a.createElement("section",null,o.a.createElement("h1",null,"Books"),a?o.a.createElement("p",null,"Loading books..."):c?o.a.createElement("p",null,"Unable to display books."):r.map((function(e){return o.a.createElement(I,{key:e.id,book:e,excerpt:!0,onDelete:function(){return h(e.id)}})})))))})),F=function(){return o.a.createElement("section",null,o.a.createElement("h1",null,"Dashboard"),o.a.createElement("p",null,"This is the dashboard."),o.a.createElement(x.b,{to:"/books",className:"button"},"View Books"))},K=function(){return o.a.createElement("nav",null,o.a.createElement("section",null,o.a.createElement(x.b,{to:"/"},"Dashboard"),o.a.createElement(x.b,{to:"/books"},"Books")))},L=Object(l.b)((function(e){return{authors:e.authors.authors,categories:e.categories.categories}}))((function(e){var t=e.book,a=e.authors,r=e.categories,c=e.dispatch,l=e.onUpdate,u=Object(n.useState)(t),s=Object(G.a)(u,2),h=s[0],m=s[1],d=Object(n.useState)(""),E=Object(G.a)(d,2),g=(E[0],E[1]);Object(n.useEffect)((function(){c(f()),c(B())}),[c]);var O=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),-1!==h.author_id){e.next=6;break}return n=fetch("http://localhost:3000/author",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:(void 0).state.addAuthorName,bio:""})}),e.next=5,n.json();case 5:a=e.sent;case 6:return e.next=8,fetch("http://localhost:3000/book/".concat(h.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(i.a)(Object(i.a)({},h),{},{author_id:void 0!==a?a.id:h.author_id}))});case 8:e.sent,l();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement("form",{onSubmit:O},o.a.createElement("label",null,"Title:"),o.a.createElement("input",{type:"text",value:h.title,onChange:function(e){return m(Object(i.a)(Object(i.a)({},h),{},{title:e.target.value}))}}),o.a.createElement("label",null,"Img:"),o.a.createElement("input",{type:"text",value:h.img,onChange:function(e){return m(Object(i.a)(Object(i.a)({},h),{},{img:e.target.value}))}}),o.a.createElement("label",null,"Author:"),o.a.createElement("select",{value:h.author_id,onChange:function(e){return m(Object(i.a)(Object(i.a)({},h),{},{author_id:e.target.value}))}},a.map((function(e){return o.a.createElement("option",{value:e.id},e.name)})),o.a.createElement("option",{value:-1},"Add New Author")),-1===h.author_id&&o.a.createElement("input",{type:"text",value:g,onChange:function(e){return g(e.target.value)}}),o.a.createElement("label",null,"Category:"),o.a.createElement("select",{value:h.category_id,onChange:function(e){return m(Object(i.a)(Object(i.a)({},h),{},{category_id:e.target.value}))}},r.map((function(e){return o.a.createElement("option",{value:e.id},e.name)}))),o.a.createElement("input",{type:"submit",value:"Update"}))})),H=Object(l.b)((function(e){return{book:e.book.book,authors:e.authors.authors,loading:{books:e.books.loading,authors:e.authors.loading},hasErrors:{books:e.books.hasErrors,authors:e.authors.hasErrors},categories:e.categories.categories}}))((function(e){var t=e.match,a=e.dispatch,r=e.book,c=e.hasErrors,l=e.loading,u=e.categories,s=t.params.id,h=Object(n.useState)(),m=Object(G.a)(h,2),d=m[0],E=m[1],g=Object(n.useState)(!1),O=Object(G.a)(g,2),k=O[0],y=O[1];Object(n.useEffect)((function(){console.log(s),a(f()),a(function(e){return function(){var t=Object(b.a)(p.a.mark((function t(a){var n,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"GET BOOK"}),t.prev=1,t.next=4,fetch("http://localhost:3000/book/".concat(e));case 4:return n=t.sent,t.next=7,n.json();case 7:o=t.sent,console.log(o),a(v(o)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),a({type:"GET_BOOK_FAILURE"});case 15:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e){return t.apply(this,arguments)}}()}(s)),console.log(r,s)}),[a,t,k,r]);Object(n.useEffect)((function(){if(console.log(r),void 0===d&&void 0!==r&&void 0!==u){var e=r.author_id,t=function(e){return u.filter((function(t){return console.log(u),t.id===e}))[0]}(r.category_id).name;fetch("http://localhost:3000/author/".concat(e)).then((function(e){return console.log(e),e.json()})).then((function(e){return console.log(e),E(Object(i.a)(Object(i.a)({},r),{},{categoryName:t,author:e}))})).catch((function(e){return console.log(e)}))}}),[r]);return o.a.createElement("section",null,k?o.a.createElement(L,{book:d,onUpdate:function(){y(!1)}}):o.a.createElement(o.a.Fragment,null,l.book?o.a.createElement("p",null,"Loading book..."):c.book?o.a.createElement("p",null,"Unable to display book."):void 0,o.a.createElement("h2",null,"Book"),d&&o.a.createElement(o.a.Fragment,null,d&&o.a.createElement(I,{key:d.id,book:d})),o.a.createElement("button",{onClick:function(){return y(!0)}},"Update Book Info")))})),P=function(e){Object(_.a)(a,e);var t=Object(A.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"componentDidMount",value:function(){this.props.getBooks(),console.log("fetching books!!")}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("h1",null," This is the HomePage!"),o.a.createElement(x.b,{to:"/books"},"Books Page! "),o.a.createElement("span",null,o.a.createElement("button",{onClick:J}," Click me ")))}}]),a}(o.a.Component),J=function(e){console.log(m),console.log("get the bookkks!!",e)},M={getBooks:m},V=Object(l.b)((function(e){return console.log("mapping state to props",e),e}),M)(P),W=function(e){Object(_.a)(a,e);var t=Object(A.a)(a);function a(){return Object(C.a)(this,a),t.apply(this,arguments)}return Object(T.a)(a,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(x.a,null,o.a.createElement(K,null),o.a.createElement(w.c,null,o.a.createElement(w.a,{exact:!0,path:"/",component:F}),o.a.createElement(w.a,{exact:!0,path:"/books",component:R}),o.a.createElement(w.a,{exact:!0,path:"/book/:id",component:H}),o.a.createElement(w.a,{exact:!0,path:"/homepage",component:V}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(l.a,{store:S},o.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[31,1,2]]]);
//# sourceMappingURL=main.ddcb8420.chunk.js.map